= turbo_frame_tag 'summary', target:"_top" do
  .summary-page-center.flex-column
    .summary-page-container
      .summary-page-sub-container
        .summary-page-first-row
          = render partial: 'ontologies/sections/metadata/ontology_description_section'
          = render partial: 'ontologies/sections/metadata/ontology_fairness_section'
          = render partial: 'ontologies/sections/metadata/ontology_relations_network'
          = render partial: 'ontologies/sections/metadata/ontology_submissions_section'
          = render partial: 'ontologies/sections/metadata/ontology_metrics_section'
        .summary-page-second-row
          = render partial: 'ontologies/sections/metadata/ontology_depiction_section'
          = render partial: 'ontologies/sections/metadata/ontology_identifiers_section'
          = render DropdownContainerComponent.new(title: 'Dates', id: 'dates') do
            - @dates_properties.each do |k, v|
              = render FieldContainerComponent.new(label: k.to_s) do
                = render DateTimeFieldComponent.new(value: v) 
          = render DropdownContainerComponent.new(title: 'Persons and organizations', id: 'person_and_organization') do
            - @persons_organizations_properties.each do |k, values|
              %p.field-normal_text
              = render FieldContainerComponent.new(label: k.to_s) do
                %div.d-flex.flex-wrap
                  - Array(values).each do |val_str|
                    - Array(val_str.split(',')).each do |v|
                      - if v
                        %div.m-1
                          = render ChipButtonComponent.new(text: v, type: "static",'data-controller':' tooltip', title: v, class:'text-truncate', style: 'max-width: 200px; display: block')
          = render DropdownContainerComponent.new(title: 'Links', id: 'link', tooltip:'hiba') do
            - @links_properties.each do |k, v|
              = render FieldContainerComponent.new(label: k.to_s, value: v)
          = render partial: 'ontologies/sections/metadata/ontology_all_projects_section'
              
          = render DropdownContainerComponent.new(title: 'Methodology', id: 'methodology',  tooltip:'syphax') do
            - @methodology_properties.each do |k, v|
              = render FieldContainerComponent.new(label: k.to_s, value: Array(v).join(',')) 
          = render partial: 'ontologies/sections/metadata/ontology_visits_section'
          = render SummarySectionComponent.new(title: 'Get my metadata back')  do
            - unless @submission_latest.nil?
              %div{data:{controller: 'metadata-downloader'}}
                =javascript_include_tag "jsonld"
                %button{:id => "getMetadataBackNquadsBtn", :class => "btn btn-primary", 'data-action': 'metadata-downloader#downloadNQuads'} N-Triple
                %button{:id => "getMetadataBackJsonldBtn", :class => "btn btn-primary", 'data-action': 'metadata-downloader#downloadJsonLd'} Json-LD
                %button{:id => "getMetadataBackXmlBtn", :class => "btn btn-primary", 'data-action': 'metadata-downloader#downloadXML'} RDF/XML
          = render partial: 'ontologies/sections/metadata/ontology_views_section'