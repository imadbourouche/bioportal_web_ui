.search-page-container 
  .search-page-subcontainer{'data-controller': 'search'}
    = form_tag(search_path, method: :get) do
      .search-page-input-container
        .search-page-input
          %input{type:"text", placeholder:"Enter a term, e.g. Melanoma", name: "q", value: @search_query}
          %button.search-page-button{type:'submit'}
            = inline_svg_tag 'icons/search.svg'
        .search-page-sizedbox
        .search-page-advanced.d-none{'data-search-target': 'advancedOptions'}
          .filter-container
            .title
              Search language
            .field
              = search_language_selector
          .filter-container
            .title
              = t("search.categories")
            .field
              = render Input::SelectComponent.new(id: 'search-categories', name: 'search-categories', value: options_for_select(categories_for_select), multiple: "multiple")
          .filter-container
            .title
              = t("search.ontologies")
            .field
              = render Input::SelectComponent.new(id: 'search-categories', name: 'search-categories', value: options_for_select(@onts_for_select), multiple: "multiple")
          
          .filter-container
            .title
              Include in search
            .options
              = render(ChipsComponent.new(name: 'property-values', value: 'Property values'))
              = render(ChipsComponent.new(name: 'obsolete-classes', value: 'Obsolete classes'))
              = render(ChipsComponent.new(name: 'ontology-views', value: 'Ontology views'))

          .filter-container
            .title
              Show only
            .options
              = render(ChipsComponent.new(name: 'exact-matches', value: 'Exact Matches'))
              = render(ChipsComponent.new(name: 'classes-with-definitions', value: 'Classes with definitions'))
              
        .search-page-options
          - if @search_results
            .search-page-number-of-results 
              = "Match in #{@search_results.length} ontologies"
          .search-page-advanced-button.show-options{'data': {'action': 'click->search#show_advanced_options', 'search-target': 'showOptionsButton'}}
            .icon
              =inline_svg_tag 'icons/settings.svg'
            .text
              Show advanced options
          .search-page-advanced-button.hide-options.d-none{'data': {'action': 'click->search#hide_advanced_options', 'search-target': 'hideOptionsButton'}}
            .icon
              =inline_svg_tag 'icons/hide.svg'
            .text
              hide advanced options
    - if @search_results
      .search-page-results-container
        - @search_results.each do |result|
          .search-page-result-element
            - title = "#{result[:title][:preflab]} - #{result[:title][:ontology]}"
            - id = result[:title][:id]
            - sub_number = result[:descendants].length
            - link = result[:title][:link]
            - definition = result[:title][:definition]
            = render Display::SearchResultComponent.new(title: title, uri: id, sub_number: sub_number, link: link, definition: definition) do |c|
              - result[:descendants].each do |d|
                - c.subresult(title: d[:preflab] , uri: d[:id], link: d[:link] ,is_sub_component: true)
        
        

