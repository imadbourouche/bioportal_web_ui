= render TurboFrameComponent.new(id: 'concept_show', data: {controller:'labels-ajax-container', 'action': 'turbo:before-fetch-request->labels-ajax-container#abortAll', 'labels-ajax-container-label-ajax-outlet': '#concept_show a[data-controller="label-ajax"]'}) do
  - if @concept.id.eql?("bp_fake_root")
    %div{:style => "padding: 100px 0; font-size: larger; font-weight: bold; text-align: center;"}
      Use the "Jump To" to find a class and display details, visualization, notes, and mappings
  - else

    %ul.nav.tabs
      %li#details_top.nav-item
        %a.nav-link.active.py-1{:href => "#details" , data:{toggle: 'tab', target: '#details_content'}} Details
      - unless skos?
        %li#instances_top.nav-item
          %a.nav-link.py-1{:href => "#instances" , data:{toggle: 'tab', target: '#instances_content'}}
            Instances
            (
            %span#instances_count
            )
      %li#visualization_top.nav-item
        %a.nav-link.py-1{:href => "#visualization", data:{toggle: 'tab', target: '#visualization_content'}} Visualization
      %li#notes_top.nav-item
        %a.nav-link.py-1{:href => "#notes", data:{toggle: 'tab', target: '#notes_content'}}
          Notes
          %span#note_count_wrapper
            (
            %span#note_count= @notes.length
            )
      %li#mappings_top.nav-item
        %a.nav-link.py-1{:href => "#mappings", data:{toggle: 'tab', target: '#mappings_content'}}
          #{concept_label_to_show(submission: @submission)} Mappings (
          %span#mapping_count= 'loading'
          )

      %a.concepts-json{:href => "#json"}
        %svg{:fill => "none", :height => "14", :viewbox => "0 0 14 14", :width => "14", :xmlns => "http://www.w3.org/2000/svg"}
          %path{:d => "M12.4444 4.66573V3.11173C12.4444 1.39417 11.0514 0 9.33333 0V1.55633C9.74582 1.55652 10.1414 1.72044 10.433 2.01209C10.7247 2.30374 10.8887 2.69925 10.889 3.11173V4.66573C10.889 5.60047 11.3097 6.4295 11.9623 7C11.3097 7.57027 10.889 8.39813 10.889 9.33333V10.8887C10.8888 11.3014 10.7247 11.6971 10.4329 11.9888C10.141 12.2805 9.74528 12.4444 9.33263 12.4444V14C11.0497 14 12.4444 12.6077 12.4444 10.8887V9.33333C12.4445 8.92079 12.6084 8.52518 12.9001 8.23347C13.1918 7.94176 13.5875 7.77782 14 7.7777V6.22137C13.7957 6.2214 13.5934 6.18118 13.4046 6.10301C13.2159 6.02485 13.0444 5.91026 12.8999 5.7658C12.7555 5.62134 12.6409 5.44984 12.5627 5.26108C12.4846 5.07233 12.4443 4.87003 12.4444 4.66573ZM3.11197 4.66667V3.11103C3.11215 2.69839 3.2762 2.30271 3.56805 2.01099C3.8599 1.71927 4.25566 1.5554 4.6683 1.5554V0C2.95027 0 1.55633 1.3923 1.55633 3.11103L1.55563 4.66667C1.55563 4.87094 1.51539 5.07322 1.43721 5.26195C1.35903 5.45067 1.24444 5.62215 1.09998 5.76658C0.955528 5.91102 0.784034 6.02558 0.595298 6.10374C0.406561 6.18189 0.204278 6.2221 0 6.22207V7.7777L0.000700061 7.7784C0.204989 7.7784 0.407277 7.81864 0.596015 7.89682C0.784753 7.97499 0.956245 8.08958 1.1007 8.23403C1.24515 8.37849 1.35974 8.54998 1.43792 8.73872C1.5161 8.92746 1.55633 9.12974 1.55633 9.33403V10.888C1.55633 12.6054 2.94863 14 4.66737 14V12.4437C4.46309 12.4437 4.26081 12.4034 4.07209 12.3252C3.88336 12.2471 3.71189 12.1325 3.56745 11.988C3.42302 11.8436 3.30845 11.6721 3.2303 11.4833C3.15214 11.2946 3.11194 11.0923 3.11197 10.888V9.33403C3.11197 8.39907 2.69103 7.57027 2.03863 7C2.69103 6.4295 3.11197 5.60117 3.11197 4.66667Z", :fill => "#31B404"}

      
      - if @enable_ontolobridge
        %li#request_term_top.nav-item
          %a.nav-link.py-1{:href => "#request_term", data:{toggle: 'tab', target: '#request_term'}}
            New Term Requests
      - if $PURL_ENABLED
        = link_to("#classPermalinkModal", class: "class-permalink nav-link", title: "Get a permanent link to this class", aria: {label: "Get a permanent link to this class"}, data: {toggle: "modal", current_purl: "#{@current_purl}"}) do
          %i{class: "fas fa-link", aria: {hidden: "true"}}
    #contents.tab-content
      #details_content.tab-pane.active.show
        = render :partial =>'/concepts/details'
      - unless skos?
        #instances_content.tab-pane
          = render :partial =>'instances/instances' , locals: {id: "class-instances-data-table"}
      #visualization_content.tab-pane
        = render :partial =>'/concepts/biomixer'
      #notes_content.tab-pane
        = render :partial =>'/notes/list'
      #mappings_content.tab-pane
        = render TurboFrameComponent.new(id:'concept_mappings',
        src:"/ajax/mappings/get_concept_table?ontologyid=#{@ontology.acronym}&conceptid=#{CGI.escape(@concept.id)}")
      - if @enable_ontolobridge
        #request_term_content.tab-pane
          = render :partial =>'/concepts/request_term'
  :javascript
    jQuery(document).ready(function(){

    jQuery("#classPermalinkModal").on("shown.bs.modal", function (e) {
    var currentPurl = jQuery("a.class-permalink").data("current-purl");
    jQuery("#purl_input").val(currentPurl);
    })

    jQuery("#purl_input").on("click", function () {
    jQuery(this).select();
    });
    });
